# Database
## トランザクション
口座から振り込みを行う場合における、送金側の残高減と振込先口座の残高増のように関連する1つ以上の処理をまとめた単位のこと
データの整合性を保つために「全ての処理が完了する」か「全く処理が行われなかったか」のどちらかで終了しなくてはならない

- アクティブ
  - トランザクションを処理中の状態
- アポート
  - トランザクションの途中で処理を強制的に中断してトランザクションをロールバックする処理
- コミット
  - トランザクションの一連の処理が成功した際に、その結果を確定させる処理

![picture 1](../images/6410ff065005f9bf677ff2d9f66edde12822e2d3ba41f5945f52df1cd36e6d21.png)


## ロックの粒度
データベース、表、物理的な入出力単位であるブロック、行といったロックをかける資源の単位のこと
- ロックの粒度が細かい　とは
  - ロックの範囲が狭い
  - 資源の猟豪やロックの解除の待ち時間が少なくなり、トランザクションの並列の実効性が増す


## データベースにおける名前の整理
- 関係
  - 関係ベータベースの表
- 属性
  - 列
- タプル
  - 行、レコード


## 埋め込みSQL
CやCOBOL、Pascalのような表データを直接扱えない手続き型プログラミングに、関係データベースを操作するためのSQLを埋め込むための手法
結果表内にある1行を参照する仕組みをカーソルという

## デッドロック
- 共有ロック
  - データを読み込むときに使うロック
  - この状態の場合は、他のトランザクションによる更新処理ができなくなる(読み込みは可能)

- 専有ロック
  - データを更新するときに使うロック
  - この状態の場合は、他のトランザクションによる読み込みや更新ができなくなる


## SQL
![picture 1](../../images/6c18155108d16b32f8911f09198ffb5df3cedc1f58abf98f594bfc06071cc6ae.png)

**グループ化したものを条件で絞り込むにはHAVING句を使用しなければなりません。**
