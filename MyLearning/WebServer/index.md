# WebServer

## 1. WebServerの歴史

参考: [Wikipedia WebServer](https://ja.wikipedia.org/wiki/Web%E3%82%B5%E3%83%BC%E3%83%90)

| 年数               | 出来事                                                  |
| ---------------- | ---------------------------------------------------- |
| 1989年            | CERNに在籍していたティム・バーナーズ=リーがWebシステムの素案を目に見える形で提案         |
| 1990年11月         | World Wide Webをより具体化した提案書を発表                         |
| 1990年11月13日      | Webシステムの開発が開始                                        |
| 1990年12月~1991年1月 | クリスマス休暇中に現在のWebサーバ群の基になるHTTPサーバ「CERN httpd」と各種ツールを作成 |
| 1991年8月          | WWWとWebサーバのデビュー プロジェクト成果の要約をニュースグループに投稿              |
| 1992年            | CERN httpdに続く2番目の実装とるなる「NCSA HTTPd」を開発               |
| 1993年            | 画像も表示できるウェブブラウザNCSA Mosaicを開発                                                     |

* **1991年8月にWWWとWebサーバがデビューした**
* **1992~1993年で一般に急速に広まった**
この時点でのWebサーバの主役は「CERN httpd」「NCSA HTTPd」だったが、改修が進まないという不満が募り、「NCSA HTTPd」に修正を加えるためのパッチを集積するプロジェクトが始まった。そして、このプロジェクトに「**Apache Group**」という名前が付けられた。このプロジェクトでNCSA HTTPdのメンテを主目的としたNCSA HTTPdの派生版の「**Apache HTTP Server**」が誕生し、こちらに主役を移すことになった。

* 2015年時点のWebServerの市場
Apache(派生版含む): 4割
IIO(MicroSoft): 3割
nginx: 2割弱

## 2. Server と WebServer

Server ≒ WebServer
Sever, WebServer: ハードウェアを指す場合もあるし、ソフトウェアを指す場合もある
肌感的にはServer=ハードウェア, WebServer=ソフトウェアを指す感じはする。
基本的にWebサーバはソフトウェアを指すものとする。

### 2-1. WebServerとは

* Webサーバは**Webサイトを公開するため**に必要なもの。
いくら頑張ってWebアプリ、Webサイトを作ってもWebサーバがなければ公開できない。

* クライアントサーバモデルのサーバを指す

1. Webクライアント(ブラウザ)を使ってWebサイトにアクセスする
2. WebクライアントからのリクエストをWebサーバで受け取る
3. Webサーバは、リクエストに応じて「HTML」や「画像」などのデータを探す
4. Webサーバは、データをWebクライアントにデータをレスポンスする

* クライアントからのリクエストの種類によって動作が異なる
  + 静的ウェブサーバ
    - 静的コンテンツの場合はWebサーバでレスポンスを返す。
  + 動的ウェブサーバ
    - 動的コンテンツの場合はアプリケーションサーバに必要なデータをリクエストする。アプリケーションサーバから必要データを受け取った後、クライアントにデータをレスポンスする。

### 2-2. WebServerがリクエストを処理するプロセス

#### 2-2-1. WebServerはリクエストを返すためのファイルを格納する必要がある。

リクエスト/レスポンスで応答するものは全てファイルとして考える。

 1. HTML文書およびその関連資産である画像
 2. CSSスタイルシート
 3. JavaScriptファイル
 4. フォント
 5. 動画など
※**自分のコンピュータでも可能だがWebサーバに全てを格納したほうがはるかに便利であるため**。

#### 2-2-2. HTTP通信

* HTTPについて気をつける点

 1. **サーバはクライアントのHTTPリクエストに応答することだけができる**
 2. クライアント(ブラウザ)は、HTTPでファイルをリクエストする時にURLを示さなければならない
 3. サーバは全てのHTTPリクエストに応える必要がある。処理できない場合でもエラーメッセージを返す必要がある。

* Webサーバがリクエストを受信した時

1. サーバは最初にリクエストされたURLが既存にファイルに一致するかどうかをチェックする。
2. 一致するファイルがあった場合、ブラウザにファイルを送り返す。なかった場合、アプリケーションサーバが必要なファイルを作成する。
3. どちらの処理もできなかった場合、エラーメッセージ(404)をブラウザに返す。

## 3. WebServerの種類

### 3-1. Apache

### 3-2. nginx

### 3-3. IIS(Internet Information Services)

## 4. CloudにおけるWebServer
