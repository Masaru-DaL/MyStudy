# Python クラス入門

## キーワード

- Python
- class
- インスタンス
- オブジェクト
- self
- 入門

# Python クラス入門

この記事ではPythonのクラスについて解説します。
Pythonのクラス入門編として、「クラスとは何か」から初め、「クラスの種類」や「クラスをどうやって使うのか」に焦点を当て、実際にコードに触れながらクラスに対する理解を深めていきましょう。

## クラスとは

まず、Python公式ドキュメントに、クラスに関して説明されていますのでそちらを確認します。(参照先: [Python 3.11.0 Classes](https://docs.python.org/3/tutorial/classes.html#classes))

> クラスは、データと機能を束ねる手段を提供します。新しいクラスを作成すると、新しいタイプのオブジェクトが作成され、そのタイプの新しいインスタンスを作成することができるようになります。各クラスインスタンスは、その状態を保持するための属性を持つことができます。また、クラスのインスタンスは、その状態を変更するためのメソッド（クラスによって定義される）を持つことができます。

> Pythonのクラスはオブジェクト指向プログラミングの標準的な機能をすべて備えています。クラスの継承機構は複数の基底クラスを許容し、派生クラスはその基底クラスまたはクラスの任意のメソッドをオーバーライドでき、メソッドは同じ名前を持つ基底クラスのメソッドを呼び出すことができます。オブジェクトは、任意の量と種類のデータを含むことができる。モジュールと同様、クラスもPythonの動的な性質を持っており、実行時に作成され、作成後にさらに変更することが可能です。

上述した公式ドキュメントの内容を、実際にクラスを実装しながら重要な部分をかいつまんで説明していきます。

## クラスに関するコーディング方法

「クラスとは何か」を説明する前に、簡単にPythonでクラスの定義方法やクラスに関するコーディング方法を先に理解します。理由としては、コーディングの内容をある程度掴んだ後の方が「クラスとは何か」を理解しやすいからです。

### Python: クラスの定義方法

- クラス定義: 構文ルール

```python:
# <>内は自身で実装する

class <クラス名称>:

    <クラスの実装内容>
```

- 構文ルールに則ったクラス定義の一例

```python:
class TestClass:

    print("Hello World!!")
```

上記のように、`class`に続けてクラス名、処理を記述するだけでクラス定義ができます。Pythonのクラス名は**CapWords 方式**（**アッパーキャメルケース**）で記述するという命名規則がありますので、単語の先頭を大文字にしてクラス名を付ける点に注意しましょう。([Python コーディング規約 PEP 8: クラスの名前](https://pep8-ja.readthedocs.io/ja/latest/#section-26))

### インスタンスの作成（インスタンス化）と実行

インスタンスの作成は、**クラスからオブジェクトを生成すること**です。クラスは「設計書」のようなもので、クラスという設計書を基にして何か（オブジェクト）を作成していきます。つまり、**クラスを定義しただけではまだ実際に何も作られていない**ということです。インスタンスを作成は以下のように行います。

```python:
class TestClass:
    print("Hello World!!")

# インスタンスの作成
test1 = TestClass()
test2 = TestClass()

# インスタンスの実行
test1 # 実行結果: Hello World!!
test2 # 実行結果: Hello World!!
```

上記のように、「`インスタンス = クラス名()`」とするだけでインスタンスの作成が簡単にできます。また、同じクラスから複数のインスタンスを作成することも可能です。

### メソッド

メソッドは簡単に言うと、**クラス内に定義された関数**のことをメソッドと呼びます。関数とメソッドの違いは以下のようになります。

```python:
# 関数
def test_class_function():
    print("Hello World!!")


class TestClass:
    # メソッド
    def test_class_method():
        print("Hello World!!")
```

関数をクラスの中で定義するとメソッドと呼ばれますが、通常の関数とメソッドで異なる点が1点あります。それは、**メソッドは必ず1つ以上の引数を持つ**ということです。(参照: [Python3.11.0 Method Objects](https://docs.python.org/3/tutorial/classes.html#method-objects))なので、上記のメソッドの例は引数に何も指定していないので、厳密なメソッドの定義から外れています。

メソッドを定義する際には、必ず`self`という引数を指定する必要があります。`self`は必ずしも`self`でなければいけないというわけではないのですが、Pythonエンジニアの慣例として`self`がデファクトスタンダードになっています。他の人にも理解できるように、基本的には`self`と記述するようにしましょう。
引数に`self`を指定した、正しいメソッドの定義とメソッドの呼び出しが以下になります。

```python:
class TestClass:
    # 正しいメソッドの定義
    def test_class_method(self):
        print("Hello World!!")

# インスタンス化
instance = TestClass()

# メソッドの呼び出し
instance.test_class_method()

# 実行結果: Hello World!!
```

### selfとは何か

なぜメソッドに`self`として引数を指定する必要があるのかは理由があります。その理由を、以下のようにクラスの中に2つのメソッドを定義した例から説明していきます。

```python:
class TestClass:
    # test_method1: 引数messageの値を表示する
    def test_method1(self, message):
        print(message)

    # test_method2: test_method1を呼び出す
    def test_method2(self):
        self.test_method1("Hello self!!")

# インスタンス化
instance = TestClass()

# メソッドの呼び出し
instance.test_method2()

# 出力 -> Hello self!!
```

上の`test_method1`は第1引数に`self`を指定し、2つ目の引数に`message`を指定し、その`message`を出力する処理を定義しています。

下の`test_method2`は、先ほど定義した`test_method1`を呼び出すメソッドを定義しています。実行する処理に注目して頂きたいのですが、`self.test_method1("Hello self!!")`の部分です。
メソッドの呼び出しには必ず「`インスタンス名 .メソッド名()`」という形でインスタンを指定する必要があります。インスタンス化するのはクラスを基にして行うので、**クラス内ではまだインスタンスが作成されていません**。そこで、**クラス内で別のメソッドを呼び出したい時に仮のインスタンスとして役割を担うのが`self`です**。つまり、`self`はそのクラス自身を表しているということです。

`self.test_method1("Hello self!!")`を分かりやすく説明すると、このクラスの中の、`test_method1`の引数に`"Hello self!!`を指定して呼び出す。ということになります。

### コンストラクタ

コンストラクタとは、**オブジェクトが生成される時に一度だけ実行されるメソッドのこと**です。

- コンストラクタの構文ルール

```python:
# <>内は自身で実装する
def __init__(self, <引数1>, <引数1>, <引数n>)

    <実行する処理>
```

コンストラクタは`__init__`という名前で固定です。initの前後に`_`（アンダーバー）が2つです。コンストラクタの概念の理解のために、一度通常のメソッド呼び出し

```python:
class TestClass:
    print("Hello World!!")

# インスタンスの作成
test1 = TestClass()

# インスタンスの実行
test1 # 実行結果: Hello World!!
```

