# Python リスト入門

この記事ではPythonの**リスト**（list）について解説します。
リストの入門編として、「リストとは何か」と、「リストの操作方法」について学習しましょう。

## listとは

Pythonには多数の値を一つにまとめて管理するデータ型が複数存在します。listはそのデータ型の一つで、**配列**と呼ばれ、`[]`（角カッコ）を使用します。

`[]`の中に格納した値を「**要素**」と呼びます。要素が違う型であっても同じリスト内に格納できます。

listは`[]`の中に要素を**直線的**に格納します。その要素の並び格納された時点で自動的に「**インデックス**」と呼ばれる番号が付けられます。また、インデックスは**要素の先頭が0から始まる**点に注意しましょう。

- `["a", "b", "c"]`の場合のインデックスと要素の対応表

| index | 0 | 1 | 2 |
| --- | --- | --- | --- |
| 要素 | a | b | c |

## リストの基本操作

まず初めに、リストの「空の配列の宣言」、もしくは「配列の初期化」を行います。空の配列の宣言は`sample_list = []`、配列の初期化は宣言と同時に値を格納する形で`sample_list = ["a", "b", "c", "d", "e"]`のように記述します。

以後、**リストの操作を説明する上で、`sample_list`の中身が`["a", "b", "c", "d", "e"]`であるという前提で進めていきます**。

### インデックス番号と要素の取得方法

- インデックス番号の取得

`index()`の**引数に要素を指定**すると、**要素に対応したインデックス番号（0からはじまる）を取得**できます。`sample_list.index("a")`とすると`0`、`sample_list.index("c")`とすると`2`となります。

- 要素の取得

要素を取得するためにはインデックスもしくはスライスで指定します。インデックス指定では**要素を取得**でき、スライス指定では指定した範囲の**要素が入ったリスト**が取得できます。

まずは初めにインデックスを指定した場合です。インデックスの指定と取得できる要素の内容を下の図に記載しています。こちらの方法は比較的簡単で、存在しないインデックスを指定するとエラーになります。

**インデックス指定の図の挿入**

次にスライスを指定した場合です。スライスの指定方法は、配列の入った変数に対し、`[]`と`:`（コロン）、インデックスを指定します。少しややこしいので下にスライス指定の図を用意しています。

「存在するインデックスの数より多い数のインデックス」を指定した場合は少し特殊です。「その1個前まで」と指定すると、指定したインデックスは存在しませんがそのインデックスより前には要素が存在するので**全ての要素が入ったリストが取得**できます。

では逆に「そのインデックスから全て」とすると、そのインデックス番号は存在しないので空のリストが取得されます。エラーにならない点も注意してください。

**スライス指定の図の挿入**

### 要素の追加方法

- append()

`append()`はリストの**末尾**に要素を一つ追加します。

`sample_list.append("f")`とすると`sample_list`の中身は`['a', 'b', 'c', 'd', 'e', 'f']`となります。

- insert()

`insert()`は**指定した位置**に要素を挿入します。第1引数にインデックス、第2引数に要素を指定します。

`sample_list.insert(3, "i")`とすると`sample_list`の中身は`['a', 'b', 'c', 'i', 'd', 'e']`となります。既に存在するインデックスを引数に指定した場合、そのインデックスは一つ後ろにずれます。

### 要素の削除方法

- clear()

`clear()`を使用するとリストの中の要素を**全て**削除します。

`sample_list.clear()`とすると、`sample_list`の中の全ての要素がなくなり`[]`となります。

- remove()

`remove()`の引数には**要素を指定**し、その要素を削除します。

`sample_list.remove("c")`とすると、`sample_list`は`['a', 'b', 'd', 'e']`となります。

- pop()

`pop()`の引数には**インデックスを指定**し、指定したインデックスに対応した要素を削除します。引数を省略した場合はリストの**末尾を削除**します。

`sample_list.pop(0)`とすると、先頭の`a`が削除され、`['b', 'c', 'd', 'e']`となります。また、`pop()`の特徴として**削除する際にその要素を返す**点があります。`sample_list.pop(0)`の動作を見るために`print(sample_list.pop(0))`とすると`a`が出力される事でそれが確認できます。

- del

`del`はメソッドではなく、**del文**です。`del`も`pop()`と同じように、要素の削除には**インデックスを指定**します。その際の`pop()`との動作の違いは削除する際に**削除した要素を返さない**点です。リストに対しての`del`の基本的な用途は、スライス指定して**要素の複数削除**、またはリストを指定して**リスト自体を削除**することです。

`del sample_list[0:2]`とすると`sample_list`の中身は`['c', 'd', 'e']`となります。次に、`del sample_list`とするとリスト自体が削除されるので、`print(sample_list)`とするとエラーになります。

### 検索方法

- in

`in`はリストの中に指定した**要素があるかを検索する演算子**です。検索後の結果は`True`または`False`で返されます。

`sample_list`に存在する`d`を指定して、`"d" in sample_list`とすると`True`が返されます。逆に存在しない`y`を指定し、`"y" in sample_list`とすると`False`が返されます。

- index()

`index()`はリストの中に指定した**要素のインデックスを検索**します。

`sample_list.index("e")`とすると`e`のインデックスである`4`が返されます。

### カウント

- len()

`len()`の引数にリストを指定すると、リストの中の**要素数を数える**ことができます。

`len(sample_list)`のようにします。中に5個の要素が入っているので`5`と返されます。

## リストの応用操作

ここからリストの応用操作に移ります。リストの応用的な操作方法を理解する事で、リストを更に幅広く操作することができるようになります。

### 結合

- + / extend

`+`と`extend`はどちらも**複数のリストを一つに結合**することができます。既にある`sample_list`とは別に`sample_list2 = ["f", "g", "h", "i", "j"]`を用意します。

`sample_list`に`sample_list2`を結合するには`sample_list + sample_list2`、または`sample_list.extend(sample_list2)`とします。どちらも結果は`['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j']`となります。

- join

`join`はリストの**文字列の要素を連結**することができます。

`"".join(sample_list)`のように空の文字列を指定すると、`abcde`と要素が返されます。空の文字列ではなく、`,`（カンマ）区切りで返したい場合は`","`と指定すると`a,b,c,d,e`と返されます。

例えば、`sample_list = ["a", "b", "c", 4, 5]`のように**文字列以外の要素が入っている場合**に`join`を使用するとエラーになります。`sample_list`を`["a", "b", "c", "4", "5"]`のように全て文字列にしてから`join`を使用すると結合できます。

### 分割

- スライス

前述したスライスを使用すると、**リストの要素を分割**することができます。返されるのは分割した要素が入った配列で、スライスの動作は上で説明したものと変わりません。

`sample_list[1:3]`とするとインデックス1~3の1個前までが分割され、`['b', 'c']`と返されます。この時、分割前の`sample_list`から要素がなくなるわけではありません。

### 整列

- sort()

`sort()`はリスト型のメソッドです。`sort()`を使用するとリスト内を**昇順、または降順に並び替える**ことができます。`sort()`はリストを並び替えるメソッドなので、`sort()`が返すのは`None`ということに注意してください。

先に降順から見てみましょう。`sample_list.sort(reverse=True)`のように`sort()`の引数に`reverse=True`と指定すると降順に並び替えられます。`sample_list`の中身が`['e', 'd', 'c', 'b', 'a']`となりました。

先ほど降順に整列した`sample_list`を昇順に並び替えます。`sample_list.sort()`とすると、`sample_list`の中身が`['a', 'b', 'c', 'd', 'e']`となります。

- sorted()

`sorted()`は組み込み関数です。`sort()`がリストの要素を整列させる際に元のリストを変更する**破壊的処理**なのに対し、`sorted()`はリストの要素を整列させても元のリストは変更されない**非破壊的処理**です。

こちらも降順から見てみましょう。`sorted(sample_list, reverse=True)`のように第2引数に`reverse=True`を指定すると降順になります。昇順は`sorted(sample_list)`と指定します。

## まとめ

今回はリストとその操作について解説しました。

Pythonで扱われる値をまとめるデータ型の中でもよく使用されます。リストの操作の「条件分岐」や「繰り返し」などの発展的な用途に活かせるように、基本的な部分はしっかりと押さえておきましょう。
