# 認証と認可の違いとは

皆さんはWeb開発における「認証」と「認可」の違いについて説明できますか？
「認証」はAuthentication、「認可」はAuthorizationと言い、日本語も英語も似たような言葉です。また、Authという単語だけで「認証」を意味することもあり、「認証」と「認可」を同じような意味で捉えているケースが見受けられます。

言葉は似ていますが全く異なる概念を持つこの2つを、しっかり理解していきましょう。

こちらの記事では、「認証と認可」について解説します。

認証（Authentication）と認可（Authorization）は、似ているようで意味は全く異なります。近年では、「Auth」という単語だけで「認証」を意味することもあり、「認証」と「認可」を同じような意味で捉えているケースも見受けられます。

こちらの記事を通して、認証と認可の違いについてしっかり学習しましょう。

## 認証と認可

認証とは、**誰であるかを確認すること**。
認可とは、**権限を許可すること**。
そして、認証は**サーバ**が行い、認可は**アプリケーション(サービス)**が行います。
両者は似たような言葉でもあるため、**認証をAuthN**、**認可をAuthZ**として区別する事が提唱されています。[引用: IT用語辞典](https://e-words.jp/w/%E8%AA%8D%E5%8F%AF.html#:~:text=%E8%8B%B1%E8%AA%9E%E3%81%A7%E3%82%82%20%E2%80%9Cauthentication%E2%80%9D%20%E3%81%A8%20%E2%80%9Cauthorization%E2%80%9D%20%E3%81%AF%E6%97%A5%E5%B8%B8%E8%AA%9E%E5%BD%99%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AF%E6%84%8F%E5%91%B3%E3%82%82%E7%B6%B4%E3%82%8A%E3%82%82%E4%BC%BC%E3%81%A6%E3%81%8A%E3%82%8A%E3%80%81%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%A8%E4%BA%8B%E6%83%85%E3%81%AF%E8%BF%91%E3%81%84%E3%80%82%E3%81%95%E3%82%89%E3%81%AB%E3%80%81%E6%96%B9%E5%BC%8F%E5%90%8D%E3%82%84%E8%A3%BD%E5%93%81%E5%90%8D%E3%81%AB%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AA%E3%81%A9%E3%81%AB%E3%80%81%E3%81%A9%E3%81%A1%E3%82%89%E3%82%82%20%E2%80%9Cauth%E2%80%9D%20%E3%81%A8%E7%95%A5%E3%81%95%E3%82%8C%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E3%81%82%E3%82%8B%E3%81%9F%E3%82%81%E3%80%81%E4%BD%99%E8%A8%88%E3%81%AB%E6%B7%B7%E5%90%8C%E3%81%97%E3%82%84%E3%81%99%E3%81%84%E3%81%A8%E3%81%84%E3%81%86%E4%BA%8B%E6%83%85%E3%81%8C%E3%81%82%E3%82%8A%E3%80%81%E8%BF%91%E5%B9%B4%E3%81%A7%E3%81%AF%E8%AA%8D%E8%A8%BC%E3%82%92%20%E2%80%9Cauthn%E2%80%9D%20%E3%80%81%E8%AA%8D%E5%8F%AF%E3%82%92%20%E2%80%9Cauthz%E2%80%9D%20%E3%81%A8%E3%81%97%E3%81%A6%E5%88%A5%E3%81%AE%E7%95%A5%E5%8F%B7%E3%82%92%E7%94%A8%E3%81%84%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E6%8F%90%E5%94%B1%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%80%82)

## 認証とは

認証とは**誰であるかを確認すること**を意味します。
誰であるかを確認するには、**知識情報**、**生体情報**、**所持情報**の3つの情報から確認します。

1. 知識情報
"What you know"：あなたは何を知っていますか？という、**本人しか知り得ない情報のこと**です。
パスワードが知識情報に該当します。

2. 生体情報
"What you are"：あなたは誰ですか？という、**本人の特徴を示すこと**です。
生体認証、顔認証が生体情報に該当します。

3. 所持情報
"What you have"：あなたは何を持っていますか？という、**対象者が持っているもののこと**です。
対象者に対してSMSが送られ、それに応答する事でサービスが利用できるようになる仕組みが所持情報に該当します。

この3つの情報を2つ以上組み合わせて認証を行うことを「**多要素認証(MFA: Multi-Factor Authentication**」とよびます。

認証を正しく行う事は「**アクセス制御**」とも呼ばれ、**対象者を正しく認証し、その対象者以外はアクセスさせない機能のこと**を指します。

### 認証が行われるまでのプロセス

認証は**サーバ**が行うと説明しました。実際に認証を行うまでのプロセスを追い、認証をサーバが行うというところを理解します。

認証までのプロセスは、まずユーザは何かしらのアプリケーションを利用する際にアカウントの新規登録を行います。**この情報はサーバ側で保存されます**。(アプリケーションにログイン機能が実装されている事とします)
そしてユーザは登録した内容(IDやパスワード)をフォームに入力し、ログインを試みます。

フォームから送られた情報の行き先がどこなのかというと、サーバです。**この時に認証が行われます**。
サーバは、フォームから送られてきた情報をチェックします。チェックする方法は、事前に登録されているユーザの情報とフォームに入力された情報が合っているかどうかです。

チェックした結果、情報が一致していれば認証されたということになり、ログインができます。もし情報が一致しない場合、認証されなかったとなり、ログインができません。

サーバが行う、ユーザの情報の確認作業が「認証」ということです。

ここまで説明を読むと、認証という言葉を特別意識しなくても普段の生活から自然と行なっている事に気付いたのではないでしょうか。

## 認可とは

認可とは、**権限を許可すること**を意味します。
認可は認証とは違い、想像がしにくいと思いますので、身近な所を例に挙げたいと思います。

自分の家を想像してみてください。
自分の家に入るためには何が必要でしょうか？

答えは「家の鍵」です。
家の鍵がないと家の中に入る事ができません。
また、自動車を乗る場合も「自動車の鍵」がないと乗る事ができません。

あまり意識したことないと思いますが、「家の鍵」は所有者に対して家に入る事を許可し、「自動車の鍵」は所有者に対して車を運転することを許可するという役割を持っています。認可はこのように、モノを主体にして考えると分かりやすいです。

今回の例で認可を理解する上で重要な点は2点です。

* 家や自動車の開発者が、家の鍵や自動車の鍵に認可の役割を持たせたこと
* **家の鍵や自動車の鍵が認可する側**に当たり、**所有者に対して「認可」している**ということ

### Web開発における認可とは

認可は**アプリケーション(サービス)**が行うと説明しました。

認可を身近な例で見てきましたが、Web開発に置き換え、「**認可はアプリケーション(サービス)が行う**」と考えると難しく感じますか？ここまでで認可というものが何となく想像出来ていればそこまで難しいものではありません。なぜなら、身近な例で挙げた認可と、Web開発における認可の考え方は同じだからです。

認可を行う家の鍵や自動車の鍵がアプリケーションに備わっていると思うと簡単に思えませんか？

アプリケーションに認可の機能を実装するのは、その**アプリケーションの開発者**です。(実際に運用されている場合はアプリケーションを運用する管理者が認可を管理する側に当たりますが、ここでは分かりやすく開発者と表現します。)
**開発者はアプリケーションを作成する際に、認可を行う機能を実装します**。認可を行う機能の重要な点は、**権限の強弱**です。

Twitterのアプリケーションを例に挙げると、ユーザが誰かの投稿を編集したり、自分とは違うユーザとして投稿出来る権限があったらサービスとして成り立つでしょうか？
**認可とは、そのサービスが適切に成り立つように、ユーザに対してどこまではして良いかという権限の調整を行う必要があります**。

## 認証・認可が分かれていた場合

認証と認可は別々でも成り立つのでしょうか？認証だけ・認可だけを実装したアプリケーションを想像して考えてみます。

### 認証だけの場合

本人や対象であることを証明してアプリケーションを使用することで、ユーザ自体の情報が守られ一見すると認証だけでも良いと思われるかもしれません。
しかし、認可の機能がないということは全ての権限を各々のユーザが持っているということです。なりすましやハッキングが往々にして行われてしまうことでしょう。

### 認可だけの場合

認可だけでも機能するアプリケーションは、ログイン機能を必要としないアプリケーションの場合です。アプリケーションを使うユーザ全てに一律の権限を設定します。無償で利用可能なWebアプリケーションが認可だけを実装したアプリケーションに該当します。

しかし、認可に加えて認証を必要とするアプリケーションの必要性が多く存在します。1つ例に挙げるとすれば、社内で同じアプリケーションを使用する場合です。
社長は全ての情報を見れる必要がありますが、社員は機密情報までを見れる必要はありません。また部署ごとに開示したり見れる情報もコントロールしたいと思うはずです。

### 認証と認可は組み合わせてこそ真価を発揮する

認証は認可とセットでなければ機能を発揮する事はできません。
認証と認可は単体だけで機能するとすれば「認可」だけです。単体で機能しますが、認証と組み合わせることでアプリケーションに柔軟性を持たせ、様々な要望を持ったユーザに対応させることができます。

## まとめ

認証と認可は似て非なるものという事が理解できたと思います。
どちらか一方だけ強化すれば良いという事でなく、どちらも強化することで適切なセキュリティ対策になります。

ユーザの情報を安全に守る事はもちろんですが、アプリケーションを適切に運用するためにも認証と認可に対する正しい認識が必要です。
