# 家のPCからWebサイトにアクセスするまで

ネットワーク、ウェブの基本の「き」から学んで行きます。
自分の家からウェブサイトにアクセスし、サイトが表示されるまでの流れを追います。

## 1. 参考サイト

[Webサイトが表示されるまでの仕組みを用語の解説を交えて紹介](https://www.rworks.jp/system/system-column/sys-entry/21249/)

## 2. ざっくり把握する

1. ブラウザにURLを入力する(例として`https://google.com`にアクセスする事とする。)
2. URLに含まれるドメイン(google.com)をDNSサーバに問い合わせる
3. DNSサーバが名前解決(ドメインからIPアドレスに変換)を行い、ブラウザにIPアドレスが送信される
4. ブラウザからWebサーバに対して3で取得したIPアドレスを送信し、データを要求する
5. Webサーバはリクエストに応じてレスポンスを返す

大まかに分けるとこの5つの工程に分けられるかなぁと思います。

### 3. ブラウザにURLを入力する

この動作は正解ですが、正確ではないです。
通常ブラウザに入力するのはURLではなく**検索文字列**の方が多いです。そこで目当てのWebサイトを見つけ、そのサイトを開きます。
なので、ブラウザの動作から確認します。

#### 3-1. 検索ボックスの動作

参考: [Search box](https://en.m.wikipedia.org/wiki/Search_box)

> 検索ボックスは、ユーザがクエリ(文字列)を入力し、ウェブ検索エンジンのサーバ側スプリトに送信する役割を持っている。

#### 3-2. 検索エンジンの仕組み

参考: [Search engine (computing)](https://en.m.wikipedia.org/wiki/Search_engine_(computing))

> 検索エンジンは、コンピュータシステムに保存されている情報を見つけるのを助けるために設計された情報検索システムです。
> 検索結果は通常リストで表示され、一般にヒットと呼ばれる。

#### 3-3. ヒットしたWebサイトにアクセスする

ここまでで検索ボックスに、目当てのサイトを見つけるために文字列を打ち込み、検索結果が返ってくるまでの動作が分かりました。
次にヒットしたWebサイトにアクセスしようと思います。

ヒットしたサイト(文字列)に右クリックすると、「リンクのアドレスをコピー」という選択肢があります。
リンクのアドレスのコピーを行い、ペーストしてみるとリンクのアドレスが貼り付けられます。(当たり前ですが)

つまり、**ヒットして出てきた文字列をクリックするという動作は、ブラウザにURLを入力しているのと同じ事**でした。

## 4. 入力されたURLはどこへ行くのか

ブラウザにURLを入力されてからの流れを追います。

* 入力されたURLはDNSサーバに送られ、URLをIPアドレスに変換する作業を行う
   URLはドメインと呼ばれるものの集合体です。
   CPUは全て0と1で処理し、それ以外を理解することはできません。ドメインはあくまでも人間が理解するために存在しています。
   DNSサーバは、ドメインをCPUが理解できるようにするために変換し、それがIPアドレスと呼ばれるものです。この作業が名前解決と呼ばれます。

## 5. IPアドレスに変換後

DNSサーバの仕組みの詳しい所は割愛しますが、DNSサーバで変換されたIPアドレスは再度ブラウザに送信されます。

## 6. IPアドレスの行き先

そもそもの目当てのデータはどこに置いてあるのかというと、Webサーバです。
DNSサーバから受け取ったIPアドレスはWebサーバへ送られます。
Webサーバは得たIPアドレスと共に、目当てのデータの要求、つまりリクエストを送ります。このリクエストはここでは`https`で送られています。

## 7. 目当てのWebページの取得

IPアドレスとリクエストを受け取ったWebサイトは、得たIPアドレスのWebサイトから`https`のリクエストに応じてHTMLファイルを、ブラウザに送信します。

ここまでの工程を踏んで、自分のPCのブラウザからWebサイトを表示させる事ができました。

## 8. まとめ

今回は細かい所はある程度理解しているので省略し、Webサイトが表示されるまでの流れを追いました。
ここまでの流れはネットワーク、Webを勉強する中でも基礎となる部分なので、何も見ないでも説明出来るようにしていきたいと思いました。
