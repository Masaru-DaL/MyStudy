# HTTP通信について細かく調べる＋curlコマンドを使って色々してみる

## 1. HTTP通信とは

* HTTP(Hypertext Transfer Protocol)
WebブラウザとWebサーバの間で、Web情報をやりとりするためのプロトコル(通信規則)

### 1-1. HTTPベースシステムの構成要素

HTTPは**クライアントサーバプロトコル**。
リクエストはユーザエージェント(または代理のプロキシ)というひとつの実体から送信される。
ほとんどの場合、ユーザエージェントはウェブブラウザだが、検索エンジンのインデックスを収集および保守するためにウェブをクロールするロボットなど、**どれでもクライアントになることが出来る**。

個々のリクエストはサーバに送信され、処理した後にレスポンスと呼ばれる回答を提供する。

クライアントとサーバの間には、例えばゲートウェイやキャッシュなどの様々な操作を行う、まとめて**プロキシサーバ**と呼ばれるいくつもの実体が存在している。

![](2022-10-18-13-57-55.png)

実際はブラウザとサーバの間にルータやモデムなどの危機が存在する。これらはウェブが階層構造で設計されたおかげでネットワークやトランスポート層の中に隠されている。
**HTTPはアプリケーション層の最上位に存在する**。HTTPを説明する際に下層のことはほとんど重要ではない。

### 1-2. クライアント: ユーザエージェント

**ユーザエージェントとは、ユーザのために働くツールのことを指す**。ユーザエージェントの役割は、主にウェブブラウザが担うが、エンジニアやウェブ開発者がアプリケーションをデバッグするために使用するプログラムである可能性もある。

ブラウザは、**常に**リクエストを生成する実体である。サーバにはならない。

* ウェブページを表示する順序

1. ページを表すHTML文書を読み込むための最初のリクエストを送信する
2. このファイルを解析し、以下に対応する追加のリクエストを発行する
   1. 実行するスクリプト
   2. 表示するレイアウトの情報(CSS)
   3. ページに含まれるサブリソース(通常は画像や動画)
3. これらのリソースを組み合わせて、Webブラウザは完全な文書であるウェブページを提供する
4. ※スクリプトによっては後の段階でブラウザが実行してウェブページを更新する場合もある。

WebページはHyper Text Transferである。つまり、表示されているコンテンツの一部が新たなウェブページの取り込みを発生させるリンクであり、ユーザがユーザエージェントを導いてウェブ内を移動できるということである。(**ページ同士が連結しているイメージ**)ブラウザはこれらの導きをHTTPリクエストに変換して、さらにユーザへ明確なレスポンスを返すためにHTTPレスポンスを解釈する。(**ユーザの需要を満たす**)
