# 認証と認可の違いとは

こちらの記事では、「認証と認可」について解説します。

認証（Authentication）と認可（Authorization）は、似ているようで意味は全く異なります。近年では、「Auth」という単語だけで「認証」を意味することもあり、「認証」と「認可」を同じような意味で捉えているケースも見受けられます。

こちらの記事を通して、認証と認可の違いについてしっかり学習しましょう。

## 認証と認可

認証とは、**誰であるかを確認すること**。
認可とは、**とある特定の条件に対して、リソースアクセスの権限を与えること**。
そして、認証は**サーバ**で行い、認可は**アプリケーション**(サービス)で行います。
両者は似たような言葉でもあるため、**認証をAuthN**、**認可をAuthZ**として区別する事が提唱されています。[引用: IT用語辞典](https://e-words.jp/w/%E8%AA%8D%E5%8F%AF.html#:~:text=%E8%8B%B1%E8%AA%9E%E3%81%A7%E3%82%82%20%E2%80%9Cauthentication%E2%80%9D%20%E3%81%A8%20%E2%80%9Cauthorization%E2%80%9D%20%E3%81%AF%E6%97%A5%E5%B8%B8%E8%AA%9E%E5%BD%99%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AF%E6%84%8F%E5%91%B3%E3%82%82%E7%B6%B4%E3%82%8A%E3%82%82%E4%BC%BC%E3%81%A6%E3%81%8A%E3%82%8A%E3%80%81%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%A8%E4%BA%8B%E6%83%85%E3%81%AF%E8%BF%91%E3%81%84%E3%80%82%E3%81%95%E3%82%89%E3%81%AB%E3%80%81%E6%96%B9%E5%BC%8F%E5%90%8D%E3%82%84%E8%A3%BD%E5%93%81%E5%90%8D%E3%81%AB%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AA%E3%81%A9%E3%81%AB%E3%80%81%E3%81%A9%E3%81%A1%E3%82%89%E3%82%82%20%E2%80%9Cauth%E2%80%9D%20%E3%81%A8%E7%95%A5%E3%81%95%E3%82%8C%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E3%81%82%E3%82%8B%E3%81%9F%E3%82%81%E3%80%81%E4%BD%99%E8%A8%88%E3%81%AB%E6%B7%B7%E5%90%8C%E3%81%97%E3%82%84%E3%81%99%E3%81%84%E3%81%A8%E3%81%84%E3%81%86%E4%BA%8B%E6%83%85%E3%81%8C%E3%81%82%E3%82%8A%E3%80%81%E8%BF%91%E5%B9%B4%E3%81%A7%E3%81%AF%E8%AA%8D%E8%A8%BC%E3%82%92%20%E2%80%9Cauthn%E2%80%9D%20%E3%80%81%E8%AA%8D%E5%8F%AF%E3%82%92%20%E2%80%9Cauthz%E2%80%9D%20%E3%81%A8%E3%81%97%E3%81%A6%E5%88%A5%E3%81%AE%E7%95%A5%E5%8F%B7%E3%82%92%E7%94%A8%E3%81%84%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E6%8F%90%E5%94%B1%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%80%82)

![AuthN-AuthZ2.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7a659b82-d622-4a5f-be21-626b5cdcd319/AuthN-AuthZ2.png)

## 認証とは

認証とは**誰であるかを確認すること**を意味します。
誰であるかの確認は、**知識情報**、**生体情報**、**所持情報**の3つの情報から確認します。

1. 知識情報
"What you know"：あなたは何を知っていますか？という、**本人しか知り得ない情報のこと**です。
パスワードや秘密の質問などが知識情報に該当します。
2. 生体情報
"What you are"：あなたは誰ですか？という、**本人の特徴を示すこと**です。
顔や指紋などが生体情報に該当します。
3. 所持情報
"What you have"：あなたは何を持っていますか？という、**対象者が持っているもののこと**です。
携帯電話やICカードなどが所持情報に該当します。

### 認証プロセス

認証はユーザがアプリケーションに**ログインする時**に行われます。

ユーザは、ログインする際にIDやパスワードなどをフォームに入力したり、顔認証などを使ってログインを試みます。この時に使用された情報はサーバに送られます。そして「**サーバ」は**、**送られた情報がサーバに保存してある情報と一致するかをチェックします**。このチェック作業が認証です。

ログイン時に用いる情報(知識情報、生体情報、所持情報)を2つ以上組み合わせて使用することを、「**多要素認証**」(MFA: Multi-Factor Authentication)と呼びます。

認証を正しく行う事は「**アクセス制御**」とも呼ばれ、**対象者を正しく認証し、その対象者以外はアプリケーションにアクセスさせない機能のこと**を指します。

## 認可とは

認可とは、**とある特定の条件に対して、リソースアクセスの権限を与えること**と説明しました。分かりやすく言うと、「****」ということです。

認可は認証とは違い、想像がしにくいと思いますので、身近な所から例を挙げて理解していきます。

認可を身近な例から挙げると、「鍵の発行」や「切符の発行」などが認可に当たります。

* 車の鍵が発行されました。車の鍵を持っていると車に乗る事ができます。
* 電車で切符を買いました。この切符を持っていれば電車に乗る事ができます。

車の鍵が発行されたことや電車の切符を買ったことで、**とある特定の条件を満たした**ことになります。

認可を理解する上で重要なことは、**自分が誰であるかという考えを切り離して考えること**です。
免許証を例に挙げても説明はできますが、ややこしくなる場合があります。なぜなら、免許証には「本人確認」という認証の用途と、「車に乗ることを許可される」という認可の用途を持っているからです。

### Web開発における認可とは

Web開発における認可も「家」の例と考え方は変わりません。

ユーザに許可されているのは、「アプリケーションに入る事だけを許可されているのか」、それとも「アプリケーションを使用することを許可するのか」という事です。

ここまで来ると、**認可は権限を与えるもの**という説明が理解できてきたのではないでしょうか。
つまり、Web開発における認可は、**どのユーザにどんな権限を与えるのかを設定する事**ということです**。**

## 認証・認可が分かれていた場合

認証と認可は別々でも成り立つのでしょうか？認証だけ・認可だけを実装したアプリケーションを想像して考えてみます。

### 認証だけの場合

基本的に**認証だけで良いパターンはありません**。認可がないということは、ログインした全てのユーザが全ての権限を持っているということになります。

つまり、なりすましやハッキングが往々にして行われてしまう事態になります。

### 認可だけの場合

**認可だけで機能するアプリケーションもあります**。ログイン機能を必要とせず、アプリケーションを使用する全員に対して同じ権限で良い場合です。インターネット上で使えるツールなどが該当します。

全てのアプリケーションは認可だけで良いのかというとそんな事はありません。例えば企業内でアプリケーションを使用する場合を考えてみてください。
経営者側は役職や部署によって見たり、扱える情報をコントロールしたいと思うはずです。認可を認証と合わせて使用する事で、このニーズに答える事ができます。
**認可は認証と合わせる事でアプリケーションに柔軟性を持たせる事が出来ます**。

## まとめ

認証と認可は言葉似ていますが、全く異なる概念だという事が理解できたでしょうか。両者は異なる概念だからこそ、アプリケーションの適切なセキュリティ対策を行う上では、どちらか一方だけ強化すれば良いという事でなく、どちらも強化することが必要です。

ユーザの情報を安全に守る事はもちろんですが、アプリケーションを適切に運用するためにも、認証と認可に対する認識を身に着け、アプリケーションの開発・管理をしていきましょう。
